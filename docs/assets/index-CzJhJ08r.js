var C=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports);import*as n from"https://cdn.jsdelivr.net/npm/leaflet@1.9.4/+esm";var T=C((D,b)=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&p(a)}).observe(document,{childList:!0,subtree:!0});function m(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function p(r){if(r.ep)return;r.ep=!0;const t=m(r);fetch(r.href,t)}})();(function(e,s){typeof D=="object"&&typeof b<"u"?b.exports=s(require("leaflet")):typeof define=="function"&&define.amd?define(["leaflet"],s):(e=typeof globalThis<"u"?globalThis:e||self,e["leaflet-path-drag"]=s(e.L))})(void 0,function(e){e.SVG.include({_resetTransformPath:function(t){t._path.setAttributeNS(null,"transform","")},transformPath:function(t,a){t._path.setAttributeNS(null,"transform","matrix("+a.join(" ")+")")}}),e.SVG.include(e.Browser.vml?{_resetTransformPath:function(t){t._skew&&(t._skew.on=!1,t._path.removeChild(t._skew),t._skew=null)},transformPath:function(t,a){let o=t._skew;o||(o=e.SVG.create("skew"),t._path.appendChild(o),o.style.behavior="url(#default#VML)",t._skew=o);const i=a[0].toFixed(8)+" "+a[1].toFixed(8)+" "+a[2].toFixed(8)+" "+a[3].toFixed(8)+" 0 0",l=Math.floor(a[4]).toFixed()+", "+Math.floor(a[5]).toFixed(),h=this._path.style;let g=parseFloat(h.left),d=parseFloat(h.top),c=parseFloat(h.width),f=parseFloat(h.height);isNaN(g)&&(g=0),isNaN(d)&&(d=0),(isNaN(c)||!c)&&(c=1),(isNaN(f)||!f)&&(f=1);const y=(-g/c-.5).toFixed(8)+" "+(-d/f-.5).toFixed(8);o.on="f",o.matrix=i,o.origin=y,o.offset=l,o.on=!0}}:{});function s(){return!0}e.Canvas.include({_resetTransformPath:function(t){this._containerCopy&&(delete this._containerCopy,t._containsPoint_&&(t._containsPoint=t._containsPoint_,delete t._containsPoint_,this._requestRedraw(t)))},transformPath:function(t,a){let o=this._containerCopy;const i=this._ctx;let l;const h=e.Browser.retina?2:1,g=this._bounds,d=g.getSize(),c=g.min;o||(o=this._containerCopy=document.createElement("canvas"),l=o.getContext("2d"),o.width=h*d.x,o.height=h*d.y,this._removePath(t),this._redraw(),l.translate(h*g.min.x,h*g.min.y),l.drawImage(this._container,0,0),this._initPath(t),t._containsPoint_=t._containsPoint,t._containsPoint=s),i.save(),i.clearRect(c.x,c.y,d.x*h,d.y*h),i.setTransform(1,0,0,1,0,0),i.restore(),i.save(),i.drawImage(this._containerCopy,0,0,d.x,d.y),i.transform.apply(i,a),this._drawing=!0,t._updatePath(),this._drawing=!1,i.restore()}});/**
* Leaflet vector features drag functionality
* @author Alexander Milevski <info@w8r.name>
* @preserve
*/e.Path.include({_transform:function(t){return this._renderer&&(t?this._renderer.transformPath(this,t):(this._renderer._resetTransformPath(this),this._update())),this},_onMouseClick:function(t){this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)}});const m={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},p={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"};function r(t,a){const o=t.x-a.x,i=t.y-a.y;return Math.sqrt(o*o+i*i)}return e.Handler.PathDrag=e.Handler.extend({statics:{DRAGGING_CLS:"leaflet-path-draggable"},initialize:function(t){this._path=t,this._matrix=null,this._startPoint=null,this._dragStartPoint=null,this._mapDraggingWasEnabled=!1,this._path._dragMoved=!1},addHooks:function(){this._path.on("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className?this._path.options.className+" "+e.Handler.PathDrag.DRAGGING_CLS:e.Handler.PathDrag.DRAGGING_CLS,this._path._path&&e.DomUtil.addClass(this._path._path,e.Handler.PathDrag.DRAGGING_CLS)},removeHooks:function(){this._path.off("mousedown",this._onDragStart,this),this._path.options.className=this._path.options.className.replace(new RegExp("\\s+"+e.Handler.PathDrag.DRAGGING_CLS),""),this._path._path&&e.DomUtil.removeClass(this._path._path,e.Handler.PathDrag.DRAGGING_CLS)},moved:function(){return this._path._dragMoved},_onDragStart:function(t){const a=t.originalEvent._simulated?"touchstart":t.originalEvent.type;console.log({eventType:a}),this._mapDraggingWasEnabled=!1,this._startPoint=t.containerPoint.clone(),this._dragStartPoint=t.containerPoint.clone(),this._matrix=[1,0,0,1,0,0],e.DomEvent.stop(t.originalEvent),e.DomUtil.addClass(this._path._renderer._container,"leaflet-interactive"),e.DomEvent.on(document,p[a],this._onDrag,this).on(document,m[a],this._onDragEnd,this),this._path._map.dragging.enabled()&&(this._path._map.dragging.disable(),this._mapDraggingWasEnabled=!0),this._path._dragMoved=!1,this._path._popup&&this._path._popup.close(),this._replaceCoordGetters(t)},_onDrag:function(t){e.DomEvent.stop(t);const a=t.touches&&t.touches.length>=1?t.touches[0]:t,o=this._path._map.mouseEventToContainerPoint(a);if(t.type==="touchmove"&&!this._path._dragMoved&&this._dragStartPoint.distanceTo(o)<=this._path._map.options.tapTolerance)return;const i=o.x,l=o.y,h=i-this._startPoint.x,g=l-this._startPoint.y;(h||g)&&(this._path._dragMoved||(this._path._dragMoved=!0,this._path.options.interactive=!1,this._path._map.dragging._draggable._moved=!0,this._path.fire("dragstart",t),this._path.bringToFront()),this._matrix[4]+=h,this._matrix[5]+=g,this._startPoint.x=i,this._startPoint.y=l,this._path.fire("predrag",t),this._path._transform(this._matrix),this._path.fire("drag",t))},_onDragEnd:function(t){const a=this._path._map.mouseEventToContainerPoint(t),o=this.moved();if(o&&(this._transformPoints(this._matrix),this._path._updatePath(),this._path._project(),this._path._transform(null),e.DomEvent.stop(t)),e.DomEvent.off(document,"mousemove touchmove",this._onDrag,this),e.DomEvent.off(document,"mouseup touchend",this._onDragEnd,this),this._restoreCoordGetters(),o){this._path.fire("dragend",{distance:r(this._dragStartPoint,a)});const i=this._path._containsPoint;this._path._containsPoint=e.Util.falseFn,e.Util.requestAnimFrame(function(){this._path._dragMoved=!1,this._path.options.interactive=!0,this._path._containsPoint=i},this)}this._mapDraggingWasEnabled&&this._path._map.dragging.enable()},_transformPoints:function(t,a){const o=this._path,i=L.point(t[4],t[5]),l=o._map.options.crs,h=l.transformation,g=l.scale(o._map.getZoom()),d=l.projection,c=h.untransform(i,g).subtract(h.untransform(e.point(0,0),g)),f=!a;if(o._bounds=new e.LatLngBounds,o._point)a=d.unproject(d.project(o._latlng)._add(c)),f&&(o._latlng=a,o._point._add(i));else if(o._rings||o._parts){const y=o._rings||o._parts;let P=o._latlngs;a=a||P,e.Util.isArray(P[0])||(P=[P],a=[a]);for(let u=0,x=y.length;u<x;u++){a[u]=a[u]||[];for(let w=0,G=y[u].length;w<G;w++){const N=P[u][w];a[u][w]=d.unproject(d.project(N)._add(c)),f&&(o._bounds.extend(P[u][w]),y[u][w]._add(i))}}}return a},_replaceCoordGetters:function(){this._path.getLatLng?(this._path.getLatLng_=this._path.getLatLng,this._path.getLatLng=e.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,{})},this._path)):this._path.getLatLngs&&(this._path.getLatLngs_=this._path.getLatLngs,this._path.getLatLngs=e.Util.bind(function(){return this.dragging._transformPoints(this.dragging._matrix,[])},this._path))},_restoreCoordGetters:function(){this._path.getLatLng_?(this._path.getLatLng=this._path.getLatLng_,delete this._path.getLatLng_):this._path.getLatLngs_&&(this._path.getLatLngs=this._path.getLatLngs_,delete this._path.getLatLngs_)}}),e.Handler.PathDrag.makeDraggable=function(t){return t.dragging=new e.Handler.PathDrag(t),t},e.Path.prototype.makeDraggable=function(){return e.Handler.PathDrag.makeDraggable(this)},e.Path.addInitHook(function(){this.options.draggable?(this.options.interactive=!0,this.dragging?this.dragging.enable():(e.Handler.PathDrag.makeDraggable(this),this.dragging.enable())):this.dragging&&this.dragging.disable()}),e.Handler.PathDrag});const _=window.map=new n.Map("map",{}).setView([22.42658,114.1952],11),v=new n.Canvas;n.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(_);function S(e,s){const m=[];return e.forEach((p,r,t)=>{if(m.push(p.concat()),r<t.length-1){const a=[t[r+1][0]-p[0],t[r+1][1]-p[1]];for(let o=1;o<s;o++)m.push([p[0]+a[0]*o/s,p[1]+a[1]*o/s])}}),m}window.polygon=new n.Polygon(n.GeoJSON.coordsToLatLngs(S([[113.97697448730469,22.403410892712124],[113.98658752441405,22.38373008592495],[114.01268005371094,22.369126397545887],[114.02778625488281,22.38563480185718],[114.04701232910156,22.395157990290755],[114.06005859375,22.413567638369805],[114.06280517578125,22.432609534876796],[114.04838562011717,22.444668051657157],[114.04289245605469,22.44847578656544],[114.03259277343749,22.444668051657157],[114.01954650878906,22.447206553211814],[113.99620056152344,22.436417600763114],[113.98178100585938,22.420549970290875],[113.97697448730469,22.403410892712124]],1e3)),{color:"#f00",draggable:!0,renderer:v}).addTo(_).bindPopup("L.Polygon");window.polyline=new n.Polyline(n.GeoJSON.coordsToLatLngs([[114.14314270019531,22.49479484975443],[114.1534423828125,22.485912942320958],[114.15206909179688,22.4732235144781],[114.14932250976561,22.459898363943893],[114.15962219238281,22.447206553211814],[114.169921875,22.447206553211814],[114.19395446777344,22.459898363943893],[114.20631408691406,22.46116748110935],[114.21180725097655,22.473858013487614],[114.22416687011719,22.471320000009992],[114.23721313476562,22.476395980457973],[114.24201965332031,22.49352604073722],[114.2303466796875,22.51572851830351],[114.21798706054688,22.524608511026262],[114.20768737792969,22.524608511026262],[114.20768737792969,22.536024805886974]]),{weight:15,draggable:!0}).addTo(_).bindPopup("I'm a polyline");window.rectangle=new n.Rectangle(n.latLngBounds([[22.334833457530486,114.0154266357422],[22.244615500323064,114.14108276367189]]),{weight:2,draggable:!0,transform:!0}).bindPopup("L.Rectangle").addTo(_);window.polygonWithHole=new n.Polygon([n.GeoJSON.coordsToLatLngs([[114.2749786376953,22.412932863517717],[114.28390502929688,22.40087159030595],[114.29008483886717,22.38880927045556],[114.30107116699219,22.382460260815716],[114.31892395019531,22.391983666602783],[114.32304382324219,22.380555501421533],[114.34295654296875,22.372936203113838],[114.334716796875,22.384364994133303],[114.33059692382812,22.393888269511194],[114.32167053222655,22.40087159030595],[114.32785034179688,22.413567638369805],[114.33197021484375,22.42499308964722],[114.32579040527344,22.430705462748918],[114.33197021484375,22.43959090917266],[114.33746337890624,22.449110398886106],[114.33540344238281,22.461802035333992],[114.32510375976562,22.464340223177118],[114.32922363281249,22.472589012561954],[114.32373046875,22.477030464933307],[114.31961059570312,22.478933900916928],[114.3017578125,22.466243833549445],[114.30244445800781,22.457360094750083],[114.29283142089844,22.454821779075832],[114.28390502929688,22.45101421842269],[114.2749786376953,22.442764145001707],[114.29077148437499,22.428166659279615],[114.27703857421875,22.420549970290875],[114.2749786376953,22.412932863517717]]),n.GeoJSON.coordsToLatLngs([[114.30107116699219,22.43387890178297],[114.29351806640625,22.414202410321302],[114.30587768554686,22.408489358342635],[114.32235717773438,22.421184710331858],[114.30107116699219,22.43387890178297]])],{interactive:!0,draggable:!0}).addTo(_).bindPopup("I'm a polygon with hole");window.circle=new n.Circle([22.360897240132374,114.14520263671875],4e3,{draggable:!0}).bindPopup("L.Circle").addTo(_);window.circleMarker=new n.CircleMarker(_.getCenter(),{draggable:!0,renderer:v}).bindPopup("L.CircleMarker").addTo(_);window.multiPolygon=new n.Polygon([n.GeoJSON.coordsToLatLngs([[114.20562744140625,22.32085984100593],[114.21592712402344,22.35261603551215],[114.26467895507812,22.351345926606957],[114.2749786376953,22.32403578584038],[114.29214477539062,22.32721165838893],[114.3017578125,22.311966810977616],[114.29420471191406,22.291002427735325],[114.29351806640625,22.272576585413475],[114.28390502929688,22.26177410097435],[114.268798828125,22.281472122783818],[114.2749786376953,22.294814367780518],[114.26948547363281,22.30243793590448],[114.27017211914062,22.31514295816939],[114.2578125,22.311966810977616],[114.24751281738281,22.299896792751927],[114.24545288085938,22.291002427735325],[114.22966003417969,22.307520083522476],[114.22073364257812,22.305614299837046],[114.20562744140625,22.32085984100593]]),n.GeoJSON.coordsToLatLngs([[114.31549072265625,22.33927931468312],[114.32029724121094,22.326576489662482],[114.32991027832031,22.326576489662482],[114.33334350585938,22.332292904091716],[114.32304382324219,22.3424548401465],[114.31549072265625,22.33927931468312]]),n.GeoJSON.coordsToLatLngs([[114.27909851074219,22.244615500323064],[114.28115844726562,22.251606295132948],[114.28665161132812,22.255419308858556],[114.29969787597656,22.26113863474449],[114.2962646484375,22.250970782750866],[114.29489135742188,22.24080219246335],[114.29008483886717,22.238895499613232],[114.27909851074219,22.244615500323064]])],{draggable:!0,color:"#092"}).bindPopup("MultiPolygon").addTo(_);window.multiPolyline=new n.Polyline([n.GeoJSON.coordsToLatLngs([[113.89869689941406,22.399601921706953],[113.89801025390625,22.422454181709707],[113.90350341796875,22.43324421978117],[113.90968322753906,22.449110398886106],[113.90693664550781,22.478299425162852],[113.9234161376953,22.488450688325408],[113.9337158203125,22.483375149789623],[113.9447021484375,22.492257220085193],[113.95225524902344,22.51255695405145]]),n.GeoJSON.coordsToLatLngs([[113.8677978515625,22.39261853713738],[113.86917114257811,22.42753195115699],[113.9234161376953,22.462436586653148],[113.94813537597656,22.473858013487614],[113.9783477783203,22.49923558968306],[113.99688720703125,22.51192263246886],[114.01336669921875,22.501138720300254],[114.02503967285155,22.508116641853675]])],{draggable:!0,color:"#e90"}).bindPopup("MultiPolyline").addTo(_);new n.Marker(_.getCenter(),{draggable:!0}).addTo(_);_.on("click",function(e){console.log("map click",e)})});export default T();
